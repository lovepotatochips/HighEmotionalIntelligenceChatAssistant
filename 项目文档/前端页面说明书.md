# 前端页面说明书

## 文档信息

| 项目名称 | VibeCoding高情商聊天助手 |
|---------|----------------------|
| 文档版本 | V1.0 |
| 编写日期 | 2026-02-18 |
| 文档类型 | 前端页面说明书 |

## 目录

1. [前端架构](#1-前端架构)
2. [页面结构](#2-页面结构)
3. [路由配置](#3-路由配置)
4. [状态管理](#4-状态管理)
5. [API封装](#5-api封装)
6. [组件说明](#6-组件说明)
7. [样式规范](#7-样式规范)
8. [页面详细说明](#8-页面详细说明)

---

## 1. 前端架构

### 1.1 技术栈

| 技术 | 版本 | 用途 |
|------|------|------|
| Vue | 3.x | 渐进式JavaScript框架 |
| Element Plus | 2.x | UI组件库 |
| Vite | 5.x | 构建工具 |
| Vue Router | 4.x | 路由管理 |
| Pinia | 2.x | 状态管理 |
| Axios | 1.x | HTTP客户端 |
| Day.js | 1.x | 日期处理 |
| SCSS | - | CSS预处理器 |

### 1.2 项目结构

```
frontend/
├── src/
│   ├── main.js              # 应用入口
│   ├── App.vue              # 根组件
│   ├── views/               # 页面组件
│   │   ├── Login.vue        # 登录页
│   │   ├── Home.vue         # 首页
│   │   ├── Chat.vue         # AI对话页
│   │   ├── Scripts.vue      # 话术库页
│   │   ├── Favorites.vue    # 收藏页
│   │   └── Profile.vue      # 个人中心页
│   ├── stores/              # Pinia状态管理
│   │   └── user.js         # 用户状态
│   ├── api/                 # API接口封装
│   │   ├── request.js      # Axios封装
│   │   ├── user.js         # 用户接口
│   │   ├── chat.js         # 聊天接口
│   │   ├── script.js       # 话术接口
│   │   └── system.js       # 系统接口
│   ├── router/              # 路由配置
│   │   └── index.js        # 路由定义
│   └── styles/             # 全局样式
│       └── index.scss      # 主样式文件
├── index.html              # HTML模板
├── package.json            # 依赖配置
└── vite.config.js          # Vite配置
```

### 1.3 架构特点

- **组件化开发**：页面拆分为可复用的组件
- **响应式设计**：适配不同屏幕尺寸
- **单页应用**：使用Vue Router实现SPA
- **状态管理**：使用Pinia集中管理状态
- **API封装**：统一封装HTTP请求

---

## 2. 页面结构

### 2.1 页面列表

| 页面 | 路径 | 功能 | 认证要求 |
|------|------|------|---------|
| 登录页 | /login | 用户登录/注册 | 否 |
| 首页 | / | 快捷功能入口 | 是 |
| AI对话页 | /chat | AI智能对话 | 是 |
| 话术库页 | /scripts | 话术搜索和浏览 | 是 |
| 收藏页 | /favorites | 收藏管理 | 是 |
| 个人中心页 | /profile | 个人信息管理 | 是 |

### 2.2 页面层级关系

```
根组件 (App.vue)
├─ 登录页 (Login.vue)
└─ 主布局
    ├─ 首页 (Home.vue)
    ├─ AI对话页 (Chat.vue)
    ├─ 话术库页 (Scripts.vue)
    ├─ 收藏页 (Favorites.vue)
    └─ 个人中心页 (Profile.vue)
```

---

## 3. 路由配置

### 3.1 路由定义

```javascript
const routes = [
  {
    path: '/login',
    name: 'Login',
    component: () => import('@/views/Login.vue'),
    meta: { requiresAuth: false }
  },
  {
    path: '/',
    name: 'Home',
    component: () => import('@/views/Home.vue'),
    meta: { requiresAuth: true }
  },
  {
    path: '/chat',
    name: 'Chat',
    component: () => import('@/views/Chat.vue'),
    meta: { requiresAuth: true }
  },
  {
    path: '/scripts',
    name: 'Scripts',
    component: () => import('@/views/Scripts.vue'),
    meta: { requiresAuth: true }
  },
  {
    path: '/favorites',
    name: 'Favorites',
    component: () => import('@/views/Favorites.vue'),
    meta: { requiresAuth: true }
  },
  {
    path: '/profile',
    name: 'Profile',
    component: () => import('@/views/Profile.vue'),
    meta: { requiresAuth: true }
  }
]
```

### 3.2 路由守卫

```javascript
router.beforeEach((to, from, next) => {
  const userStore = useUserStore()

  if (to.meta.requiresAuth && !userStore.isLoggedIn) {
    next('/login')
  } else if (to.path === '/login' && userStore.isLoggedIn) {
    next('/')
  } else {
    next()
  }
})
```

### 3.3 路由跳转

```javascript
// 使用router.push跳转
router.push('/chat')

// 使用命名路由跳转
router.push({ name: 'Chat' })

// 带参数跳转
router.push({ name: 'Scripts', query: { keyword: '需求' } })

// 返回上一页
router.back()
```

---

## 4. 状态管理

### 4.1 用户状态 (user.js)

```javascript
import { defineStore } from 'pinia'
import { login as loginApi, getUserInfo as getUserInfoApi } from '@/api/user'

export const useUserStore = defineStore('user', {
  state: () => ({
    token: localStorage.getItem('token') || '',
    userInfo: null
  }),

  getters: {
    isLoggedIn: (state) => !!state.token,
    username: (state) => state.userInfo?.username || '',
    role: (state) => state.userInfo?.role || ''
  },

  actions: {
    async login(username, password) {
      const data = await loginApi(username, password)
      this.token = data.access_token
      this.userInfo = data.user
      localStorage.setItem('token', data.access_token)
    },

    async getUserInfo() {
      const data = await getUserInfoApi()
      this.userInfo = data
    },

    logout() {
      this.token = ''
      this.userInfo = null
      localStorage.removeItem('token')
      router.push('/login')
    }
  }
})
```

### 4.2 状态使用

```javascript
import { useUserStore } from '@/stores/user'

// 在组件中使用
const userStore = useUserStore()

// 访问状态
console.log(userStore.token)
console.log(userStore.userInfo)

// 调用方法
await userStore.login('username', 'password')
userStore.logout()
```

---

## 5. API封装

### 5.1 Axios配置 (request.js)

```javascript
import axios from 'axios'
import { ElMessage } from 'element-plus'
import { useUserStore } from '@/stores/user'

const request = axios.create({
  baseURL: import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000',
  timeout: 10000
})

// 请求拦截器
request.interceptors.request.use(
  (config) => {
    const userStore = useUserStore()
    if (userStore.token) {
      config.headers.Authorization = `Bearer ${userStore.token}`
    }
    return config
  },
  (error) => {
    return Promise.reject(error)
  }
)

// 响应拦截器
request.interceptors.response.use(
  (response) => {
    return response.data
  },
  (error) => {
    if (error.response?.status === 401) {
      ElMessage.error('登录已过期，请重新登录')
      const userStore = useUserStore()
      userStore.logout()
    } else {
      ElMessage.error(error.response?.data?.message || '请求失败')
    }
    return Promise.reject(error)
  }
)

export default request
```

### 5.2 API接口示例 (user.js)

```javascript
import request from './request'

export function login(username, password) {
  const formData = new FormData()
  formData.append('username', username)
  formData.append('password', password)
  return request({
    url: '/api/auth/login',
    method: 'POST',
    data: formData,
    headers: { 'Content-Type': 'application/x-www-form-urlencoded' }
  })
}

export function getUserInfo() {
  return request({
    url: '/api/auth/me',
    method: 'GET'
  })
}
```

### 5.3 API调用示例

```javascript
import { login } from '@/api/user'
import { useUserStore } from '@/stores/user'

const userStore = useUserStore()
await login('username', 'password')
```

---

## 6. 组件说明

### 6.1 页面组件

#### Login.vue - 登录页

**功能**：
- 用户登录
- 用户注册
- 表单验证

**主要元素**：
- 登录表单（用户名、密码）
- 注册表单（用户名、密码、手机号、邮箱等）
- 登录/注册切换
- 记住密码选项

**核心代码**：

```javascript
const loginForm = reactive({
  username: '',
  password: ''
})

const loginRules = {
  username: [{ required: true, message: '请输入用户名', trigger: 'blur' }],
  password: [{ required: true, message: '请输入密码', trigger: 'blur' }]
}

const handleLogin = async () => {
  await formRef.value.validate()
  await userStore.login(loginForm.username, loginForm.password)
  router.push('/')
}
```

---

#### Home.vue - 首页

**功能**：
- 显示用户信息
- 快捷功能入口
- 常见场景入口

**主要元素**：
- 顶部用户信息栏
- 欢迎区域
- 快捷功能卡片（AI对话、话术库、我的收藏）
- 常见场景列表

**核心代码**：

```javascript
const userStore = useUserStore()

const quickActions = [
  { icon: 'ChatDotRound', label: 'AI对话', color: '#409EFF', path: '/chat' },
  { icon: 'Collection', label: '话术库', color: '#67C23A', path: '/scripts' },
  { icon: 'Star', label: '我的收藏', color: '#E6A23C', path: '/favorites' }
]

const scenarios = [
  { name: '需求沟通', desc: '高效传递需求，避免误解', icon: 'ChatLineRound' },
  { name: '项目推进', desc: '进度同步与风险沟通', icon: 'TrendCharts' },
  { name: 'Bug处理', desc: '专业反馈，高效协作', icon: 'Warning' }
]

const startChat = (scene) => {
  router.push({ path: '/chat', query: { message: `我需要${scene}的话术` } })
}
```

---

#### Chat.vue - AI对话页

**功能**：
- AI智能对话
- 话术卡片展示
- 话术操作（复制、收藏、调整）
- 对话设置

**主要元素**：
- 聊天头部（返回按钮、标题、设置按钮）
- 消息区域（用户消息、AI消息、话术卡片）
- 输入区域（文本框、发送按钮）
- 设置弹窗（岗位、语气、长度）

**核心代码**：

```javascript
const messages = ref([])
const inputMessage = ref('')
const loading = ref(false)

const chatSettings = reactive({
  position: userStore.role,
  tone: userStore.userInfo?.tone_preference || '温和',
  length: userStore.userInfo?.length_preference || '简洁版'
})

const handleSend = async () => {
  if (!inputMessage.value.trim()) return

  messages.value.push({
    type: 'user',
    content: inputMessage.value
  })

  loading.value = true

  try {
    const response = await sendMessage({
      message: inputMessage.value,
      ...chatSettings
    })

    messages.value.push({
      type: 'assistant',
      content: response.reply,
      scripts: response.scripts
    })

    inputMessage.value = ''
  } finally {
    loading.value = false
  }
}

const copyScript = (script) => {
  navigator.clipboard.writeText(script.content)
  ElMessage.success('复制成功')
}

const toggleFavorite = async (script) => {
  if (script.isFavorite) {
    await removeFavorite(script.id)
  } else {
    await addFavorite({ script_id: script.id })
  }
  script.isFavorite = !script.isFavorite
}
```

---

#### Scripts.vue - 话术库页

**功能**：
- 话术搜索
- 多维度筛选
- 话术列表展示
- 分页

**主要元素**：
- 搜索框
- 筛选条件（岗位、场景、语气、分类）
- 话术列表
- 分页组件

**核心代码**：

```javascript
const searchForm = reactive({
  keyword: '',
  position_id: null,
  category_id: null,
  scene_type: null,
  tone: null
})

const pagination = reactive({
  page: 1,
  pageSize: 10,
  total: 0
})

const scripts = ref([])

const searchScripts = async () => {
  const response = await searchScripts({
    ...searchForm,
    page: pagination.page,
    page_size: pagination.pageSize
  })
  scripts.value = response.scripts
  pagination.total = response.total
}

const handlePageChange = (page) => {
  pagination.page = page
  searchScripts()
}
```

---

#### Favorites.vue - 收藏页

**功能**：
- 收藏列表展示
- 取消收藏
- 查看详情

**主要元素**：
- 收藏列表
- 取消收藏按钮
- 空状态提示

**核心代码**：

```javascript
const favorites = ref([])

const loadFavorites = async () => {
  const response = await getFavoritesList()
  favorites.value = response
}

const removeFavoriteItem = async (scriptId) => {
  await removeFavorite(scriptId)
  loadFavorites()
}

onMounted(() => {
  loadFavorites()
})
```

---

#### Profile.vue - 个人中心页

**功能**：
- 查看个人信息
- 修改个人信息
- 修改偏好设置

**主要元素**：
- 用户头像
- 用户信息表单
- 偏好设置（语气、长度）
- 保存按钮

**核心代码**：

```javascript
const userForm = reactive({
  phone: '',
  email: '',
  role: '',
  tone_preference: '温和',
  length_preference: '简洁版'
})

const loadUserInfo = async () => {
  const userInfo = await getUserInfo()
  Object.assign(userForm, userInfo)
}

const updateUserInfo = async () => {
  await updateUser(userForm)
  ElMessage.success('更新成功')
}

onMounted(() => {
  loadUserInfo()
})
```

---

### 6.2 公共组件

#### 话术卡片组件

**功能**：展示话术卡片，支持复制、收藏、调整操作

**Props**：
- script: 话术对象
- showActions: 是否显示操作按钮

---

## 7. 样式规范

### 7.1 颜色规范

| 颜色 | 用途 | HEX值 |
|------|------|--------|
| 主色 | 主要按钮、链接 | #409EFF |
| 成功 | 成功提示 | #67C23A |
| 警告 | 警告提示 | #E6A23C |
| 危险 | 危险提示 | #F56C6C |
| 信息 | 信息提示 | #909399 |
| 文字主色 | 主要文字 | #303133 |
| 文字辅色 | 次要文字 | #606266 |
| 边框色 | 边框 | #DCDFE6 |
| 背景色 | 页面背景 | #F5F7FA |

### 7.2 间距规范

| 名称 | 数值 | 用途 |
|------|------|------|
| xs | 4px | 极小间距 |
| sm | 8px | 小间距 |
| md | 16px | 中等间距 |
| lg | 24px | 大间距 |
| xl | 32px | 超大间距 |

### 7.3 字体规范

| 名称 | 大小 | 用途 |
|------|------|------|
| small | 12px | 辅助文字 |
| base | 14px | 正文 |
| medium | 16px | 次级标题 |
| large | 18px | 一级标题 |
| xlarge | 20px | 特殊标题 |

### 7.4 圆角规范

| 名称 | 数值 | 用途 |
|------|------|------|
| small | 2px | 小圆角 |
| base | 4px | 基础圆角 |
| medium | 8px | 中等圆角 |
| large | 12px | 大圆角 |

---

## 8. 页面详细说明

### 8.1 登录页

#### 页面布局

```
┌─────────────────────────────────┐
│                               │
│         [Logo/标题]           │
│                               │
│     ┌───────────────────────┐  │
│     │   用户名输入框       │  │
│     └───────────────────────┘  │
│                               │
│     ┌───────────────────────┐  │
│     │   密码输入框       │  │
│     └───────────────────────┘  │
│                               │
│      [登录按钮] [注册链接]     │
│                               │
└─────────────────────────────────┘
```

#### 表单验证规则

| 字段 | 规则 |
|------|------|
| 用户名 | 必填，3-50字符 |
| 密码 | 必填，至少6字符 |
| 手机号 | 11位数字（如填写） |
| 邮箱 | 有效的邮箱格式（如填写） |

#### 交互说明

- 输入框失去焦点时进行验证
- 点击登录按钮时进行完整验证
- 登录成功后跳转到首页
- 登录失败显示错误提示

---

### 8.2 首页

#### 页面布局

```
┌─────────────────────────────────┐
│ [头像] [用户名] [角色] [设置] │ 顶部导航
├─────────────────────────────────┤
│                               │
│    你好，[用户名]             │ 欢迎区域
│    我是你的专属沟通搭子...      │
│                               │
│  快捷功能                     │
│  ┌──────┐ ┌──────┐ ┌──────┐│
│  │AI对话│ │话术库│ │收藏  ││ 功能卡片
│  └──────┘ └──────┘ └──────┘│
│                               │
│  常见场景                     │
│  ┌───────────────────────┐    │
│  │ 需求沟通           [→] │    │
│  └───────────────────────┘    │
│  ┌───────────────────────┐    │
│  │ 项目推进           [→] │    │
│  └───────────────────────┘    │
└─────────────────────────────────┘
```

#### 交互说明

- 点击功能卡片跳转到对应页面
- 点击场景卡片跳转到AI对话页，并预设场景描述
- 设置按钮跳转到个人中心

---

### 8.3 AI对话页

#### 页面布局

```
┌─────────────────────────────────┐
│ [←] AI对话           [⚙]   │ 聊天头部
├─────────────────────────────────┤
│                               │
│  [用户]                       │
│  我需要需求沟通的话术          │ 消息区域
│                               │
│  [AI]                        │
│  为您找到了3条需求沟通相关...│
│  ┌───────────────────────┐    │
│  │ 需求确认话术         │    │
│  │ 关于[需求]需要确认... │    │ 话术卡片
│  │ [复制][收藏][调整]   │    │
│  └───────────────────────┘    │
│                               │
│  ┌───────────────────────┐    │
│  │ 需求传递话术         │    │
│  │ 各位，这是本周需求... │    │
│  │ [复制][收藏][调整]   │    │
│  └───────────────────────┘    │
│                               │
├─────────────────────────────────┤
│ ┌───────────────────────────┐  │ 输入区域
│ │ 描述你的沟通场景...      │  │
│ │                          │  │
│ └───────────────────────────┘  │
│              [发送]          │
└─────────────────────────────────┘
```

#### 交互说明

- 输入框支持多行输入
- 按Enter键发送消息
- 发送按钮禁用状态：空消息或加载中
- 话术卡片支持：复制、收藏、调整
- 设置按钮打开设置弹窗

---

### 8.4 话术库页

#### 页面布局

```
┌─────────────────────────────────┐
│ 话术库                        │ 页面标题
├─────────────────────────────────┤
│ [搜索框] [搜索按钮] [重置]    │ 搜索区域
│                               │
│ [岗位▼] [场景▼] [语气▼]      │ 筛选区域
│                               │
│ ┌───────────────────────────┐  │
│ │ 需求确认话术     [详情] │  │
│ │ 场景:需求沟通 语气:温和  │  │ 话术列表
│ │ 使用:45  点赞:12         │  │
│ └───────────────────────────┘  │
│                               │
│ ┌───────────────────────────┐  │
│ │ 需求传递话术     [详情] │  │
│ │ 场景:需求沟通 语气:温和  │  │
│ │ 使用:38  点赞:8          │  │
│ └───────────────────────────┘  │
│                               │
│         [<] 1/5 [>]          │ 分页
└─────────────────────────────────┘
```

#### 交互说明

- 搜索框支持实时搜索或按Enter搜索
- 筛选条件可组合使用
- 点击重置清空所有筛选条件
- 点击话术查看详情
- 分页支持点击页码或上一页/下一页

---

### 8.5 收藏页

#### 页面布局

```
┌─────────────────────────────────┐
│ 我的收藏                      │ 页面标题
├─────────────────────────────────┤
│                               │
│ ┌───────────────────────────┐  │
│ │ 需求确认话术            │  │
│ │ 收藏时间: 2026-02-18    │  │ 收藏列表
│ │ 自定义: (无)             │  │
│ │ [查看] [取消收藏]        │  │
│ └───────────────────────────┘  │
│                               │
│ ┌───────────────────────────┐  │
│ │ Bug反馈话术              │  │
│ │ 收藏时间: 2026-02-17    │  │
│ │ 自定义: 修改后的内容...  │  │
│ │ [查看] [取消收藏]        │  │
│ └───────────────────────────┘  │
│                               │
└─────────────────────────────────┘
```

#### 交互说明

- 按收藏时间倒序排列
- 点击查看跳转到话术详情
- 点击取消收藏直接移除
- 空状态显示提示信息

---

### 8.6 个人中心页

#### 页面布局

```
┌─────────────────────────────────┐
│ 个人中心                [返回]  │ 页面标题
├─────────────────────────────────┤
│        [头像]               │
│        [更换头像]            │ 头像区域
├─────────────────────────────────┤
│ 用户名: testuser             │ 用户信息
│ 角色: 产品经理               │
│ 注册时间: 2026-02-18        │
├─────────────────────────────────┤
│ 手机号: [13800138000]       │
│ 邮箱:   [test@example.com] │ 信息表单
│ 角色:   [产品经理▼]         │
├─────────────────────────────────┤
│ 语气偏好: [温和▼]          │ 偏好设置
│ 长度偏好: [简洁版▼]        │
├─────────────────────────────────┤
│         [保存]              │ 操作按钮
└─────────────────────────────────┘
```

#### 交互说明

- 头像点击可选择本地文件上传
- 表单字段支持修改
- 保存前进行验证
- 保存成功显示提示
- 返回按钮返回首页

---

## 9. 响应式设计

### 9.1 断点设置

| 断点 | 屏幕宽度 | 说明 |
|------|---------|------|
| xs | <768px | 手机 |
| sm | >=768px | 平板 |
| md | >=992px | 小屏幕桌面 |
| lg | >=1200px | 大屏幕桌面 |
| xl | >=1920px | 超大屏幕 |

### 9.2 适配策略

- 移动端：单列布局，全宽显示
- 平板：双列布局，适当间距
- 桌面：三列布局，固定宽度

---

## 10. 性能优化

### 10.1 代码分割

使用路由懒加载，按需加载页面组件：

```javascript
const Home = () => import('@/views/Home.vue')
const Chat = () => import('@/views/Chat.vue')
```

### 10.2 图片优化

- 使用WebP格式
- 添加懒加载
- 压缩图片大小

### 10.3 资源压缩

- 使用Gzip压缩
- 开启Brotli压缩
- 最小化CSS和JS

---

**文档结束**

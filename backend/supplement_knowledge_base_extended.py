import sqlite3
from datetime import datetime

def supplement_knowledge_base_extended():
    conn = sqlite3.connect('vibe_chat.db')
    cursor = conn.cursor()
    
    new_scripts = []
    
    # ===========================================
    # 需求沟通话术（产品经理）- 扩展
    # ===========================================
    
    # 需求调研
    new_scripts.append(('用户调研沟通', '为了更好地了解用户需求，我们需要进行用户调研。调研方式包括：1. 用户访谈：与目标用户一对一沟通，2. 问卷调查：收集大量用户反馈，3. 数据分析：分析用户行为数据。建议优先进行用户访谈，深入了解用户场景。', '与团队沟通用户调研计划', 11, 3, '需求沟通', '专业', '同事', '用户调研,需求沟通', 1))
    
    new_scripts.append(('竞品分析沟通', '我分析了几个主要竞品的情况：1. [竞品1]的优势是[优势]，劣势是[劣势]，2. [竞品2]的优势是[优势]，劣势是[劣势]。基于这些分析，我们的产品应该重点突出[差异化优势]。', '与团队分享竞品分析结果', 11, 3, '需求沟通', '专业', '同事', '竞品分析,需求沟通', 1))
    
    new_scripts.append(('需求优先级排序', '基于以下维度对需求进行优先级排序：1. 用户价值：对用户的重要程度，2. 商业价值：对公司的收益，3. 技术成本：开发难度，4. 时间紧迫性：市场时机。综合评估后，建议的优先级是：[优先级列表]。', '向团队说明需求优先级的评估标准', 11, 3, '需求沟通', '专业', '同事', '需求优先级,评估', 1))
    
    # 需求评审
    new_scripts.append(('需求评审会开场', '各位好，今天我们召开需求评审会。会议目标是：1. 明确需求范围，2. 评估技术可行性，3. 识别潜在风险，4. 确定开发计划。首先我来介绍本次需求的背景和目标。', '需求评审会的开场白', 11, 3, '需求沟通', '专业', '同事', '需求评审,会议开场', 1))
    
    new_scripts.append(('需求范围确认', '本次需求的范围包括：1. 核心功能：[功能列表]，2. 优化项：[优化列表]，3. 不包括：[排除列表]。请大家确认这个范围是否合理，是否有遗漏或需要调整的地方。', '确认需求的具体范围', 11, 3, '需求沟通', '专业', '同事', '需求范围,确认', 1))
    
    new_scripts.append(('需求评审结论', '经过评审，我们达成以下共识：1. 需求范围：[范围]，2. 技术方案：[方案]，3. 开发计划：[计划]，4. 风险点：[风险]。后续请大家按计划执行，有问题及时沟通。', '总结需求评审的结论', 11, 3, '需求沟通', '专业', '同事', '需求评审,结论', 1))
    
    # 需求变更管理
    new_scripts.append(('需求变更评估', '关于[需求变更]，我评估了一下影响：1. 工作量增加：[增加量]，2. 时间延长：[延长天数]，3. 成本增加：[增加成本]，4. 风险增加：[风险描述]。建议按照以下方式处理：[处理方案]。', '评估需求变更的影响', 13, 3, '需求变更', '专业', '同事', '需求变更,评估', 1))
    
    new_scripts.append(('需求变更决策', '关于[需求变更]，综合考虑各方面因素，我的建议是：[决策建议]。理由是：1. [理由1]，2. [理由2]，3. [理由3]。请大家一起讨论这个方案是否可行。', '提出需求变更的决策建议', 13, 3, '需求变更', '专业', '同事', '需求变更,决策', 1))
    
    new_scripts.append(('需求变更通知客户', '尊敬的客户，关于您提出的[需求变更]，我们经过评估，建议的实施方案是：[方案]。这个变更可能带来以下影响：[影响]。请您确认是否接受这些影响，我们才能推进实施。', '向客户通知需求变更的影响', 13, 3, '需求变更', '专业', '客户', '需求变更,通知', 1))
    
    # ===========================================
    # 项目推进话术（项目经理）- 扩展
    # ===========================================
    
    # 项目规划
    new_scripts.append(('项目计划制定', '根据项目需求和资源情况，我制定了项目计划：1. 阶段划分：[阶段列表]，2. 里程碑：[里程碑列表]，3. 时间节点：[时间节点]，4. 资源分配：[资源分配]。请大家审阅一下，有问题及时反馈。', '制定并分享项目计划', 6, 2, '项目推进', '专业', '同事', '项目计划,制定', 1))
    
    new_scripts.append(('项目风险评估', '我识别出以下项目风险：1. [风险1]：[风险描述]，可能性：[概率]，影响：[影响]，应对措施：[措施]，2. [风险2]：[风险描述]，可能性：[概率]，影响：[影响]，应对措施：[措施]。请大家关注这些风险点。', '评估项目风险并制定应对措施', 9, 2, '风险同步', '专业', '同事', '项目风险,评估', 1))
    
    new_scripts.append(('资源协调沟通', '关于[项目名称]的资源需求，我需要协调以下资源：1. 人力资源：[人员需求]，2. 设备资源：[设备需求]，3. 预算资源：[预算需求]。请相关部门支持，确保项目顺利推进。', '协调项目所需的各种资源', 6, 2, '项目推进', '专业', '同事', '资源协调,沟通', 1))
    
    # 项目监控
    new_scripts.append(('项目进度监控', '本周项目进度监控结果如下：按计划完成：[完成任务]，提前完成：[提前任务]，滞后：[滞后任务]。对于滞后的任务，需要采取以下措施：[应对措施]。请大家重点关注。', '监控并汇报项目进度', 8, 2, '进度同步', '专业', '同事', '项目进度,监控', 1))
    
    new_scripts.append(('项目质量监控', '项目质量监控发现以下问题：1. [问题1]：[问题描述]，影响：[影响]，2. [问题2]：[问题描述]，影响：[影响]。建议采取以下改进措施：[改进措施]。请大家按计划执行。', '监控并汇报项目质量', 8, 2, '进度同步', '专业', '同事', '项目质量,监控', 1))
    
    new_scripts.append(('项目成本监控', '项目成本监控情况如下：预算：[预算金额]，已支出：[支出金额]，剩余：[剩余金额]。成本偏差：[偏差金额]，偏差率：[偏差率]。需要注意的成本风险：[风险描述]。', '监控并汇报项目成本', 8, 2, '进度同步', '专业', '同事', '项目成本,监控', 1))
    
    # 项目沟通
    new_scripts.append(('项目周会组织', '各位，本周的项目周会现在开始。会议议程：1. 上周进展回顾，2. 本周工作计划，3. 风险问题讨论，4. 其他事项。请大家按顺序发言，每人3-5分钟。', '组织项目周会', 8, 2, '进度同步', '专业', '同事', '项目周会,组织', 1))
    
    new_scripts.append(('项目里程碑评审', '各位，今天进行[里程碑名称]的评审。评审内容包括：1. 交付物验收，2. 质量评估，3. 风险回顾，4. 下一步计划。请相关人员准备好评审材料。', '组织项目里程碑评审', 10, 2, '向上汇报', '专业', '同事', '里程碑,评审', 1))
    
    new_scripts.append(('项目总结会', '各位，[项目名称]已经圆满完成。今天召开总结会，主要内容：1. 项目成果回顾，2. 经验教训总结，3. 团队表彰，4. 后续安排。欢迎大家畅所欲言，分享收获和建议。', '组织项目总结会', 10, 2, '向上汇报', '积极', '同事', '项目总结,会议', 1))
    
    # 项目问题处理
    new_scripts.append(('项目问题上报', '领导，[项目名称]遇到严重问题：[问题描述]。问题影响：[影响范围]。已采取的措施：[已采取措施]。建议的解决方案：[建议方案]。需要您的决策和支持。', '向上级汇报严重项目问题', 10, 2, '向上汇报', '紧急', '领导', '项目问题,上报', 1))
    
    new_scripts.append(('项目危机应对', '各位，[项目名称]出现危机情况：[危机描述]。当前影响：[影响范围]。紧急应对措施：[应对措施]。请大家按照应急方案执行，确保项目稳定。我会全程跟进。', '应对项目危机情况', 9, 2, '风险同步', '紧急', '同事', '项目危机,应对', 1))
    
    new_scripts.append(('项目冲突调解', '关于[冲突事项]，我分别听取了双方的意见。甲方认为：[甲方观点]，乙方认为：[乙方观点]。建议的解决方案：[解决方案]。如果双方同意，我们按这个方案执行。如果还有分歧，可以请领导决策。', '调解项目中的冲突', 6, 2, '项目推进', '委婉', '同事', '项目冲突,调解', 1))
    
    # ===========================================
    # Bug处理话术（测试工程师）- 扩展
    # ===========================================
    
    # Bug生命周期管理
    new_scripts.append(('Bug生命周期说明', 'Bug的生命周期包括以下阶段：1. 新建：测试发现并提交Bug，2. 分配：项目经理分配给开发人员，3. 修复：开发人员修复Bug，4. 验证：测试人员验证修复结果，5. 关闭：Bug修复通过后关闭。请大家按流程执行。', '说明Bug的生命周期管理流程', 26, 7, 'Bug反馈', '专业', '同事', 'Bug生命周期,流程', 1))
    
    new_scripts.append(('Bug状态更新提醒', '各位，请及时更新Bug状态。当前有[X]个Bug状态超过[天数]天未更新，请相关负责人尽快处理。特别是[Bug列表]，这些是P0/P1级别的Bug，需要优先处理。', '提醒更新Bug状态', 27, 7, 'Bug反馈', '紧急', '同事', 'Bug状态,更新提醒', 1))
    
    new_scripts.append(('Bug回归测试提醒', '测试同事，以下Bug已经修复，请进行回归测试：[Bug列表]。回归测试的重点是：1. 验证Bug是否彻底解决，2. 检查是否引入新的Bug，3. 验证相关功能是否正常。请尽快完成回归测试。', '提醒进行Bug回归测试', 27, 7, 'Bug反馈', '专业', '同事', 'Bug回归,测试提醒', 1))
    
    # Bug质量分析
    new_scripts.append(('Bug趋势分析', '本周Bug趋势分析如下：新增Bug：[数量]个，修复Bug：[数量]个，关闭Bug：[数量]个。Bug分布：[模块分布]。高风险模块：[模块列表]。建议重点关注这些模块的代码质量。', '分析Bug的趋势和分布', 26, 7, 'Bug反馈', '专业', '同事', 'Bug趋势,分析', 1))
    
    new_scripts.append(('Bug根本原因分析', '关于[Bug类型]这类Bug，我分析了根本原因：[原因分析]。建议采取以下预防措施：1. [措施1]，2. [措施2]，3. [措施3]。这样可以避免类似Bug再次出现。', '分析Bug的根本原因并提出预防措施', 26, 7, 'Bug反馈', '专业', '同事', 'Bug根本原因,分析', 1))
    
    new_scripts.append(('Bug质量报告', '本月Bug质量报告：1. Bug总数：[数量]个，2. Bug密度：[密度]，3. 修复率：[修复率]，4. 回归率：[回归率]，5. 平均修复时间：[时间]。与上月相比，质量[提升/下降]。', '生成Bug质量报告', 26, 7, 'Bug反馈', '专业', '领导', 'Bug质量,报告', 1))
    
    # Bug协作沟通
    new_scripts.append(('Bug分配沟通', '开发同事，[Bug标题]分配给你了。Bug描述：[描述]。优先级：P[级别]。期望修复时间：[时间]。如果遇到困难，及时沟通，我们一起解决。', '分配Bug给开发人员', 27, 7, 'Bug反馈', '温和', '同事', 'Bug分配,沟通', 1))
    
    new_scripts.append(('Bug修复协助', '开发同事，关于[Bug标题]，需要我协助排查吗？我可以提供以下支持：1. 提供更详细的复现步骤，2. 提供测试环境和数据，3. 协助分析日志。请告诉我你需要什么支持。', '主动协助开发人员修复Bug', 27, 7, 'Bug反馈', '温和', '同事', 'Bug修复,协助', 1))
    
    new_scripts.append(('Bug验收反馈', '开发同事，关于[Bug标题]，我验收了一下，发现还有问题：[问题描述]。建议你继续排查一下。如果需要我配合，随时告诉我。', '反馈Bug验收发现的问题', 27, 7, 'Bug反馈', '委婉', '同事', 'Bug验收,反馈', 1))
    
    # ===========================================
    # Bug处理话术（前端开发）- 扩展
    # ===========================================
    
    new_scripts.append(('前端Bug定位方法', '遇到前端Bug时，可以按以下方法定位：1. 查看控制台错误信息，2. 使用调试工具断点调试，3. 检查网络请求，4. 对比正常和异常的差异，5. 查阅相关文档。如果定位困难，可以寻求同事帮助。', '说明前端Bug的定位方法', 18, 4, 'Bug处理', '专业', '同事', '前端Bug,定位方法', 1))
    
    new_scripts.append(('前端性能Bug处理', '关于性能问题，建议从以下方面优化：1. 减少HTTP请求，2. 压缩资源文件，3. 使用CDN加速，4. 优化图片加载，5. 代码懒加载。我已经按照这些思路进行了优化，性能提升了[提升比例]。', '处理前端性能相关的Bug', 18, 4, 'Bug处理', '专业', '同事', '前端性能,Bug处理', 1))
    
    new_scripts.append(('前端兼容性Bug处理', '关于兼容性问题，我测试了主流浏览器：Chrome[版本]、Firefox[版本]、Safari[版本]、Edge[版本]。问题出现在[浏览器]浏览器，原因是[原因分析]。修复方案是：[修复方案]。已兼容所有主流浏览器。', '处理浏览器兼容性Bug', 18, 4, 'Bug处理', '专业', '同事', '前端兼容性,Bug处理', 1))
    
    new_scripts.append(('前端UI修复沟通', '设计师，关于[UI问题]，我已经按照设计稿修复了。修改内容：[修改内容]。请您验收一下，看是否符合设计要求。如果还有差异，请告诉我具体的问题。', '与设计师沟通UI修复', 18, 4, 'Bug处理', '温和', '同事', '前端UI,修复沟通', 1))
    
    new_scripts.append(('前端接口异常处理', '关于接口异常问题，我分析了情况：异常原因：[原因分析]。影响范围：[影响]。临时解决方案：[临时方案]。永久解决方案：[永久方案]。建议后端同事尽快处理接口问题。', '处理前端接口异常', 18, 4, 'Bug处理', '专业', '同事', '前端接口,异常处理', 1))
    
    # ===========================================
    # Bug处理话术（后端开发）- 扩展
    # ===========================================
    
    new_scripts.append(('后端Bug定位方法', '遇到后端Bug时，可以按以下方法定位：1. 查看服务器日志，2. 分析数据库查询，3. 检查业务逻辑，4. 复现问题场景，5. 使用调试工具。如果定位困难，可以寻求同事帮助。', '说明后端Bug的定位方法', 22, 5, 'Bug处理', '专业', '同事', '后端Bug,定位方法', 1))
    
    new_scripts.append(('后端性能Bug处理', '关于性能问题，我分析了慢查询和耗时操作：1. [慢查询1]：[优化方案]，2. [耗时操作1]：[优化方案]。优化后，性能提升了[提升比例]。建议定期进行性能监控和优化。', '处理后端性能相关的Bug', 22, 5, 'Bug处理', '专业', '同事', '后端性能,Bug处理', 1))
    
    new_scripts.append(('后端并发Bug处理', '关于并发问题，原因是[原因分析]。解决方案是：[解决方案]，包括：1. [措施1]，2. [措施2]，3. [措施3]。已通过压测验证，可以支持[并发数]并发。', '处理后端并发相关的Bug', 22, 5, 'Bug处理', '专业', '同事', '后端并发,Bug处理', 1))
    
    new_scripts.append(('后端数据一致性处理', '关于数据一致性问题，原因是[原因分析]。解决方案是：[解决方案]，包括：1. [措施1]，2. [措施2]，3. [措施3]。已验证数据一致性，不会出现异常数据。', '处理后端数据一致性问题', 22, 5, 'Bug处理', '专业', '同事', '后端数据,一致性', 1))
    
    new_scripts.append(('后端安全Bug处理', '关于安全问题，我进行了全面排查：1. [漏洞类型]：[修复方案]，2. [漏洞类型]：[修复方案]。已通过安全扫描，没有发现高危漏洞。建议定期进行安全审计。', '处理后端安全相关的Bug', 22, 5, 'Bug处理', '专业', '同事', '后端安全,Bug处理', 1))
    
    # ===========================================
    # 客户对接话术（售前人员）- 扩展
    # ===========================================
    
    # 客户关系维护
    new_scripts.append(('客户生日祝福', '[客户姓名]您好！今天是您的生日，祝您生日快乐！感谢您一直以来的支持，希望我们能有更多的合作机会。祝您工作顺利，身体健康！', '给客户发送生日祝福', 1, 1, '客户对接', '温馨', '客户', '生日祝福,客户维护', 1))
    
    new_scripts.append(('节日问候', '[客户姓名]您好！[节日名称]到了，祝您节日快乐！在这个美好的节日里，希望您和家人都过得开心。感谢您一直以来的支持，我们期待为您提供更好的服务。', '给客户发送节日问候', 1, 1, '客户对接', '温馨', '客户', '节日问候,客户维护', 1))
    
    new_scripts.append(('客户回访', '[客户姓名]您好！距离我们合作已经[时间]了，我想了解一下：1. 产品使用情况如何，2. 有没有遇到什么问题，3. 有没有什么建议或需求。您的反馈对我们很重要，期待您的回复。', '定期回访客户', 1, 1, '客户对接', '温和', '客户', '客户回访,维护', 1))
    
    # 客户投诉处理
    new_scripts.append(('客户投诉倾听', '[客户姓名]您好！我理解您的心情，对于您遇到的问题，我深表歉意。请您详细描述一下具体情况，我会认真听取，并尽快为您解决问题。', '倾听客户的投诉', 1, 1, '客户对接', '同理', '客户', '客户投诉,倾听', 1))
    
    new_scripts.append(('客户投诉处理', '关于您反映的问题，我已经了解了具体情况。问题的原因是：[原因分析]。解决方案是：[解决方案]。预计[时间]可以解决。对于给您带来的不便，我再次表示歉意。', '处理客户的投诉', 1, 1, '客户对接', '专业', '客户', '客户投诉,处理', 1))
    
    new_scripts.append(('客户投诉跟进', '[客户姓名]您好！关于您之前反映的问题，处理进度如下：[进度]。目前已经解决了[完成情况]。后续我们会继续跟进，确保问题彻底解决。请问您还有什么其他问题吗？', '跟进客户投诉的处理进度', 1, 1, '客户对接', '温和', '客户', '客户投诉,跟进', 1))
    
    # 客户需求变更
    new_scripts.append(('客户需求变更评估', '[客户姓名]您好！关于您提出的需求变更，我评估了一下：变更内容：[变更]，影响范围：[影响]，工作量增加：[增加量]，时间延长：[延长天数]，成本增加：[增加成本]。请您确认是否接受这些影响。', '评估客户提出的需求变更', 13, 3, '需求变更', '专业', '客户', '需求变更,评估', 1))
    
    new_scripts.append(('客户需求变更协商', '[客户姓名]您好！关于需求变更，我理解您的需求。不过考虑到影响较大，建议我们这样处理：1. 分阶段实施，2. 优先处理核心需求，3. 其他需求后续迭代。这样既能满足您的需求，又不会对项目造成太大影响。您觉得怎么样？', '与客户协商需求变更的处理方案', 13, 3, '需求变更', '委婉', '客户', '需求变更,协商', 1))
    
    # 客户培训
    new_scripts.append(('产品培训安排', '[客户姓名]您好！为了让您更好地使用我们的产品，我们为您安排了培训。培训内容包括：1. 产品功能介绍，2. 操作演示，3. 常见问题解答。培训时间是[时间]，地点是[地点]。请您提前安排好时间。', '为客户安排产品培训', 1, 1, '客户对接', '专业', '客户', '产品培训,安排', 1))
    
    new_scripts.append(('培训开场白', '各位好！欢迎参加我们的产品培训。我是[公司名称]的[职位]，今天的培训目标是帮助大家：1. 了解产品功能，2. 掌握操作方法，3. 解决常见问题。培训过程中如果有什么问题，随时可以提问。', '培训会的开场白', 1, 1, '客户对接', '专业', '客户', '培训,开场白', 1))
    
    new_scripts.append(('培训结束话术', '各位，今天的培训就到这里了。感谢大家的参与！如果有任何问题，随时可以联系我们。我们会定期组织进阶培训，欢迎大家参加。祝大家使用愉快！', '培训会的结束语', 1, 1, '客户对接', '温和', '客户', '培训,结束语', 1))
    
    # 插入新话术
    cursor.executemany('''
        INSERT INTO scripts (title, content, brief_content, category_id, position_id, scene_type, tone, target_audience, tags, is_free)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    ''', new_scripts)
    
    conn.commit()
    
    print('知识库扩展补充完成！')
    print(f'新增话术数量: {len(new_scripts)}条')
    print(f'总话术数量: {cursor.execute("SELECT COUNT(*) FROM scripts").fetchone()[0]}条')
    
    conn.close()

if __name__ == '__main__':
    supplement_knowledge_base_extended()
